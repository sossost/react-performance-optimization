# ì˜ˆì œ 15: í˜ì¸íŒ… ìµœì í™” (Painting Optimization)

## ëª©ì 

ë¸Œë¼ìš°ì € **í˜ì¸íŒ…(Paint) ë‹¨ê³„ ìµœì í™”**ë¥¼ ë…ë¦½ì ìœ¼ë¡œ í•™ìŠµí•˜ê¸° ìœ„í•œ ì˜ˆì œì…ë‹ˆë‹¤.
í˜„ì¬ëŠ” ë¬¸ì„œë§Œ ì œê³µí•˜ë©°, ì‹¤ìŠµ ì½”ë“œëŠ” ì¶”í›„ ì¶”ê°€ë  ì˜ˆì •ì…ë‹ˆë‹¤.

---

## êµ¬ì¡°

ì•„ë˜ëŠ” êµ¬í˜„ ì˜ˆì • êµ¬ì¡°ì…ë‹ˆë‹¤.

- **Before ëª¨ë“œ**

  - í° ì˜ì—­ì´ ìì£¼ repaintë¨
  - box-shadow/blur ê°™ì€ ê³ ë¹„ìš© íš¨ê³¼ ë‚¨ë°œ
  - ìŠ¤í¬ë¡¤/ì• ë‹ˆë©”ì´ì…˜ ì‹œ ê¹œë¹¡ì„
  - ë¶ˆí•„ìš”í•œ ë ˆì´ì–´ ìƒì„±

- **After ëª¨ë“œ**

  - ë³€í™”ë¥¼ ìµœì†Œí™”í•´ repaint ë²”ìœ„ ì¶•ì†Œ
  - `transform`/`opacity` ì¤‘ì‹¬ìœ¼ë¡œ í•©ì„± ë‹¨ê³„ í™œìš©
  - ë ˆì´ì–´ ìˆ˜ë¥¼ í†µì œí•´ GPU ë¶€ë‹´ ìµœì†Œí™”
  - ì´ë¯¸ì§€/ê·¸ë¼ë°ì´ì…˜ í˜ì¸íŒ… ë¹„ìš© ìµœì í™”

- **ë ˆì´ì•„ì›ƒ**

  - Before/After ëª¨ë“œë¥¼ ë‚˜ë€íˆ ë¹„êµ
  - ì¹´ë“œ/ë°°ë„ˆ ì„¹ì…˜ì—ì„œ í˜ì¸íŠ¸ ë¹„ìš© ì°¨ì´ë¥¼ ì²´ê°
  - ìŠ¤í¬ë¡¤ê³¼ hover ì• ë‹ˆë©”ì´ì…˜ìœ¼ë¡œ ë¹„êµ ê°€ëŠ¥

---

## ğŸ“š ì´ë¡ : í˜ì¸íŒ… ìµœì í™” ì›ë¦¬ì™€ ì „ëµ

## 1. ê°œìš” (Overview)

ë¸Œë¼ìš°ì € ë Œë”ë§ì—ì„œ **Paint**ëŠ” ì‹¤ì œ í”½ì…€ì„ ê·¸ë¦¬ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.
Paint ë¹„ìš©ì´ ì»¤ì§€ë©´ ë©”ì¸ ìŠ¤ë ˆë“œê°€ ì ìœ ë˜ì–´ **í”„ë ˆì„ ë“œë**ì´ ë°œìƒí•©ë‹ˆë‹¤.

í•µì‹¬ ê°œë…:

- **Paint**: í”½ì…€ ë Œë”ë§ ë‹¨ê³„
- **Composite**: ë ˆì´ì–´ í•©ì„± ë‹¨ê³„
- **Paint Storm**: í° ì˜ì—­ì´ ë°˜ë³µì ìœ¼ë¡œ ë‹¤ì‹œ ê·¸ë ¤ì§€ëŠ” í˜„ìƒ
- **Overdraw**: ë³´ì´ì§€ ì•ŠëŠ” ì˜ì—­ê¹Œì§€ ê·¸ë¦¬ëŠ” ë‚­ë¹„

---

## 2. í˜ì¸íŒ… ìµœì í™”ì™€ ì„±ëŠ¥ì˜ ê´€ê³„

### 2.1 í˜ì¸íŠ¸ ë²”ìœ„ ì¶•ì†Œ

- **Before**: í° ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ ë³€ê²½ìœ¼ë¡œ ì „ì²´ repaint
- **After**: ë³€ê²½ ì˜ì—­ ìµœì†Œí™”ë¡œ repaint ë²”ìœ„ ì¶•ì†Œ
- **íš¨ê³¼**: ìŠ¤í¬ë¡¤/ì• ë‹ˆë©”ì´ì…˜ í”„ë ˆì„ ì•ˆì •

### 2.2 í•©ì„± ë‹¨ê³„ í™œìš©

- **Before**: top/left ë³€ê²½ìœ¼ë¡œ ë§¤ í”„ë ˆì„ paint ë°œìƒ
- **After**: transform/opacityë¡œ í•©ì„±ë§Œ ìˆ˜í–‰
- **íš¨ê³¼**: ë©”ì¸ ìŠ¤ë ˆë“œ ì ìœ  ê°ì†Œ, 60fps ìœ ì§€

### 2.3 ê³ ë¹„ìš© íš¨ê³¼ ê´€ë¦¬

- **Before**: í° blur, box-shadow ì‚¬ìš©
- **After**: í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì œí•œì ìœ¼ë¡œ ì‚¬ìš©
- **íš¨ê³¼**: Paint ë¹„ìš© ê°ì†Œ

---

## 3. ë¬¸ì œ ìƒí™©: ê³¼ë„í•œ repaint

### âŒ Bad Case

```css
.card {
  transition: top 200ms ease, box-shadow 200ms ease;
}

.card:hover {
  top: -6px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
}
```

### ë¬¸ì œì 

- `top` ë³€ê²½ì€ Layout + Paint ìœ ë°œ
- í° box-shadowëŠ” Paint ë¹„ìš© ê¸‰ì¦
- hoverê°€ ì¦ì€ UIì—ì„œ í”„ë ˆì„ ë“œë

---

## 4. í˜ì¸íŒ… ìµœì í™” ì „ëµ

### 4.1 transform/opacity ì‚¬ìš©

```css
.card {
  transition: transform 200ms ease, opacity 200ms ease;
  will-change: transform;
}

.card:hover {
  transform: translateY(-6px);
  opacity: 0.98;
}
```

**ì¥ì :**

- Layout/Paint ì—†ì´ í•©ì„±ë§Œ ìˆ˜í–‰
- ì• ë‹ˆë©”ì´ì…˜ì´ ë¶€ë“œëŸ¬ì›€

### 4.2 repaint ì˜ì—­ ìµœì†Œí™”

```css
.card {
  contain: paint;
}
```

- í˜ì¸íŠ¸ ë²”ìœ„ë¥¼ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ë¡œ ì œí•œ
- ë‹¤ë¥¸ ì˜ì—­ repaint ì „íŒŒ ë°©ì§€

### 4.3 ê³ ë¹„ìš© ìŠ¤íƒ€ì¼ ì œí•œ

- í° `box-shadow`, `filter: blur` ìµœì†Œí™”
- í•„ìš” ì‹œ ì‘ì€ ìš”ì†Œì—ë§Œ ì ìš©
- ë°˜ë³µ íŒ¨í„´ì€ ì´ë¯¸ì§€ ìŠ¤í”„ë¼ì´íŠ¸ë‚˜ SVGë¡œ ëŒ€ì²´ ê³ ë ¤

### 4.4 ë°°ê²½ê³¼ ê·¸ë¼ë°ì´ì…˜ ìµœì í™”

- ë³µì¡í•œ ê·¸ë¼ë°ì´ì…˜ì€ ì •ì  ì´ë¯¸ì§€ë¡œ ëŒ€ì²´ ê³ ë ¤
- ë°°ê²½ íŒ¨í„´ì€ ì‘ì€ íƒ€ì¼ ì´ë¯¸ì§€ë¥¼ ë°˜ë³µ

---

## 5. í•©ì„± ë ˆì´ì–´ ê´€ë¦¬

### âœ… í•©ì„± ë ˆì´ì–´ê°€ í•„ìš”í•œ ê²½ìš°

- transform/opacity ì• ë‹ˆë©”ì´ì…˜
- ê³ ì • ìœ„ì¹˜ ìš”ì†Œ (sticky/fixed)

### âš ï¸ ê³¼ë„í•œ ë ˆì´ì–´ ìƒì„±

- `will-change` ë‚¨ë°œì€ GPU ë©”ëª¨ë¦¬ ì¦ê°€
- í•„ìš”í•œ ìš”ì†Œì—ë§Œ ì œí•œì ìœ¼ë¡œ ì‚¬ìš©

---

## 6. ì£¼ì˜ì‚¬í•­

- Paint ìµœì í™”ëŠ” **ë””ìì¸ ìš”êµ¬ì‚¬í•­ê³¼ íŠ¸ë ˆì´ë“œì˜¤í”„**
- ë¬´ì¡°ê±´ì ì¸ ë ˆì´ì–´ ìƒì„±ì€ ì˜¤íˆë ¤ ë©”ëª¨ë¦¬ ë‚­ë¹„
- Paint ë¹„ìš©ì´ í° ìš”ì†ŒëŠ” **ê°„ê²°í•œ ìŠ¤íƒ€ì¼**ë¡œ ëŒ€ì²´ ê³ ë ¤

---

## 7. ì‹¤ì „ ì ìš© ì²´í¬ë¦¬ìŠ¤íŠ¸

- ì• ë‹ˆë©”ì´ì…˜ì— top/left/width/heightë¥¼ ì“°ëŠ”ê°€? â†’ transform/opacityë¡œ ë³€ê²½
- hover/scroll ì‹œ í° ì˜ì—­ repaintê°€ ìˆëŠ”ê°€? â†’ repaint ë²”ìœ„ ì¶•ì†Œ
- box-shadow/blurê°€ ê³¼ë„í•œê°€? â†’ ê°’ ì¶•ì†Œ ë˜ëŠ” ëŒ€ì²´
- ê·¸ë¼ë°ì´ì…˜ì´ ë³µì¡í•œê°€? â†’ ì •ì  ë¦¬ì†ŒìŠ¤ë¡œ ëŒ€ì²´ ê³ ë ¤
- ë ˆì´ì–´ê°€ ê³¼ë„í•œê°€? â†’ will-change ì •ë¦¬

---

## ì‹¤í–‰ ë°©ë²•

í˜„ì¬ ì˜ˆì œ ì½”ë“œëŠ” ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤. ì½”ë“œê°€ ì¶”ê°€ë˜ë©´ ì‹¤í–‰ ë°©ë²•ì„ ì—…ë°ì´íŠ¸í•˜ê² ìŠµë‹ˆë‹¤.

---

## ì¸¡ì • ë°©ë²•

### 1. Performance íŒ¨ë„

- Chrome DevTools > Performance > Record
- Paint ì´ë²¤íŠ¸ì™€ ë©”ì¸ ìŠ¤ë ˆë“œ ì ìœ  ì‹œê°„ í™•ì¸

### 2. Rendering íŒ¨ë„

- Chrome DevTools > Rendering > Paint flashing í™œì„±í™”
- repaintê°€ ë°œìƒí•˜ëŠ” ì˜ì—­ í™•ì¸

### 3. Layers íŒ¨ë„

- ë ˆì´ì–´ ìˆ˜ì™€ í•©ì„± ë¹„ìš© í™•ì¸
- ë¶ˆí•„ìš”í•œ ë ˆì´ì–´ê°€ ìˆëŠ”ì§€ ì ê²€

---

## í•µì‹¬ ìš”ì•½

- Paint ë¹„ìš©ì„ ì¤„ì´ë ¤ë©´ **ë³€ê²½ ë²”ìœ„ë¥¼ ìµœì†Œí™”**
- transform/opacity ì¤‘ì‹¬ìœ¼ë¡œ í•©ì„± ë‹¨ê³„ í™œìš©
- ê³ ë¹„ìš© íš¨ê³¼(box-shadow/blur)ëŠ” ì œí•œì ìœ¼ë¡œ ì‚¬ìš©
- ë ˆì´ì–´ ìƒì„±ì€ ìµœì†Œí•œìœ¼ë¡œ ê´€ë¦¬

---

## ğŸ“š ì°¸ê³  ìë£Œ (References)

**Painting ìµœì í™”**

- [Web.dev: Rendering Performance](https://web.dev/rendering-performance/)
- [Web.dev: Avoid Large Complex Layouts](https://web.dev/avoid-large-complex-layouts-and-layout-thrashing/)
- [Chrome DevTools: Paint flashing](https://developer.chrome.com/docs/devtools/rendering/#paint-flashing)
- [MDN: contain](https://developer.mozilla.org/en-US/docs/Web/CSS/contain)
